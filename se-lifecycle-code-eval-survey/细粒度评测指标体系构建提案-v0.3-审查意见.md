# 细粒度评测指标体系构建提案 v0.3 — 审查意见

> **审查工具**: Codex (GPT-5.2 High Reasoning) | **审查日期**: 2026-02-28 | **消耗 token**: ~71K
>
> **审查范围**: 修复验证、内部一致性、新增内容质量、残留问题、改进建议

---

## v0.2 关键问题修复验证

| 修复点 | 状态 | 备注 |
|------|------|------|
| 4.3.1 标题"万行代码缺陷率"→"千行代码缺陷密度"，单位统一为 /1000 (KLOC) | RESOLVED | 标题、公式、基线均已统一 |
| ComUIBench 全部统一为 ComUICoder | RESOLVED | 全文检索 ComUIBench=0 |
| TestGenEval 参考文献年份 2026 → 2024 | RESOLVED | 附录B已改为 2024 |
| Metric ID (M-X.Y) 覆盖所有指标 | RESOLVED | 47 个数值型 Metric ID 均存在且无重复 |
| 方向标注（↑/↓/→）覆盖所有指标卡片 | RESOLVED | 所有指标卡片均包含"方向"行 |

---

## 新发现问题汇总（8 条）

| 严重度 | 数量 | 关键问题 |
|--------|------|---------|
| Critical | 0 | - |
| Major | 3 | 正文↔7.1 指标命名不一致；附录A未用 Metric ID 导致主键体系"断链"；Agent 指标方向标注对复合指标不够精确 |
| Minor | 5 | 6.7 指标数量口径不一致；6.7 相关性阈值断言缺少依据；6.8 缺少若干落地细节；LoC/变量符号混用；指标卡片格式说明与实际字段覆盖不一致 |
| Info | 10+ | 5 项修复均已到位；章节编号连续；多项 v0.2 公式严谨性建议已吸收 |

---

## 一、修复验证详情

### 1.（Info）4.3.1 "千行代码缺陷密度"修复到位，KLOC 口径一致

### 2.（Info）ComUIBench → ComUICoder 全文统一完成

### 3.（Info）TestGenEval 年份修复到位（2024）

### 4.（Info）Metric ID 覆盖主体指标，且无重复

### 5.（Info）方向标注覆盖所有指标卡片

---

## 二、内部一致性

### 6.（Major）正文指标名称 vs 7.1 汇总表存在约 17 处不一致

7.1 中大量使用缩写/简写，与正文标题不一致，典型例子：
- `M-3.1`：正文"测试生成基础质量" vs 7.1"测试生成质量"
- `M-4.4`：正文"代码审查辅助质量" vs 7.1"代码审查质量"
- `M-2.4.2`：正文"安全编码标准合规率" vs 7.1"安全标准合规率"
- `M-2.3.1`：正文"执行效率指标" vs 7.1"执行效率 NET/NTMU"
- `M-1.1`：正文"需求-代码语义对齐度 (SBC)" vs 7.1"SBC 语义对齐度"

建议：7.1 的"指标"列强制使用正文标题的规范全称；或允许短名但新增"规范名/别名"列。

### 7.（Major）附录 A 未引入 Metric ID，导致主键体系在附录层断链

附录 A 目前是"名称+●"的映射图，没有 Metric ID，且大量使用缩写。建议改成至少包含 `Metric ID + 规范名 + 阶段` 的矩阵。

### 8.（Info）章节编号连续性良好，无明显断号或重复

### 9.（Minor）LoC/KLOC 术语已统一声明，但公式变量符号仍存在混用

公式中混用 `lines_of_code`、"代码行数"、`LoC`。建议在文首补符号表，所有公式统一写法。

### 10.（Minor）指标卡片格式说明与实际字段覆盖存在落差

开头声明每个指标卡片含"统计报告"，但 47 个指标中绝大多数缺失该行。建议补齐或将其降级为可选字段。

---

## 三、新增内容质量

### 11.（Minor）6.7 指标依赖图分类方向正确，但需收敛

- 数量口径不一致：6.7 写"45 个指标"，实际是 47 个数值型指标
- 示例列举不全，容易被误解为"只有这些指标属于某类"
- "Lint 与异味 r>0.7"属经验性判断，建议改为"通常高度相关（需实测相关性矩阵）"

### 12.（Minor）6.8 LLM-as-Judge 规范总体可操作，但缺少若干工程落地细节

建议补强：
- 明确 `confidence` 的取值集合与含义
- 规定 Judge 输入代码必须带行号（否则证据行号不可复现）
- ICC ≥ 0.75 注明具体类型（如 ICC(2,2) / ICC(3,1)）
- 给出 rubric 版本化与回归测试机制

### 13.（Major）Agent 指标方向标注对复合指标不够精确

5.1-5.5 的公式与口径比 v0.2 清晰很多，但"方向"行多为单一 ↑，而指标内部包含方向相反的子指标：
- `M-5.1`：`avg_turns_to_solve`（↓）与 `success_at_N`（↑）混合，但方向标注为 ↑
- `M-5.2`：`unnecessary_call_rate`（↓）但方向标注为 ↑

建议写成 `→（成功率↑，轮数/冗余率↓）`，或拆成独立 Metric ID。

---

## 四、残留问题

### 14.（Major）Metric ID 主键体系在附录层仍未闭环（同问题 7）

### 15.（Info）v0.2 中三处硬伤均已修复

---

## 五、改进建议

### 16.（Major）把指标主键体系升级成可自动校验的"指标注册表"

建议维护一张 Metric Registry：`metric_id / 规范中文名 / 英文名 / 允许别名 / 阶段 / 方向 / 粒度 / 是否依赖 Judge / 统计报告模板`，用它生成 7.1 汇总表与附录 A。

### 17.（Minor）6.7 依赖图建议从分类示意升级为可执行 DAG

用 Mermaid 画图或给完整"上游-下游"边表，标注边类型。

### 18.（Minor）为所有 P0/P1 指标补齐统计报告模板

建议统一：均值/中位数 + P25/P75 + 95% CI（bootstrap），分语言/分任务类型分层报告。

### 19.（Info）建议的下一步修改优先级

1. 立即修复：正文↔7.1 指标命名一致性策略
2. 立即修复：附录 A 引入 Metric ID，闭环主键体系
3. 高优先级：Agent 复合指标的方向标注规范化
4. 中优先级：补齐统计报告字段、统一符号命名、细化 Judge 校准细节
