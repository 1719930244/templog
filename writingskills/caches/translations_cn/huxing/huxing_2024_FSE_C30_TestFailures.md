# Easy over Hard: A Simple Baseline for Test Failures Causes Prediction
# 简单胜于复杂：测试失败原因预测的简单基线方法

**来源**: FSE Companion 2024 | **作者**: Zhipeng Gao 等

## 摘要
测试失败原因分析对于确定后续缺陷处理方式至关重要，但手动分析测试日志耗时且繁琐，可占修复问题总时间的30-40%。本文提出NCChecker（Naive Failure Cause Checker），一种简单但难以超越的启发式方法，用于自动识别失败测试日志的失败原因。NCChecker包含三个阶段：日志抽象、查找表构建和失败原因预测。在来自工业合作伙伴的超过10K测试日志的真实数据集上，NCChecker在多个基准上表现出色，同时具有高效率和低内存消耗的优势，并能成功处理数据不平衡问题。作者建议将NCChecker作为未来研究的基线方法。

## 引言核心
- 测试失败原因多样（环境问题、源代码缺陷、测试脚本问题、第三方库问题），不同类型需要不同处理方式
- 信息过载挑战：测试日志平均3-4K行，最大超过550K行，人工分析极其困难
- 数据不平衡挑战：缺陷相关问题占63%，第三方库问题仅占1.4%，相似性方法在不平衡数据上性能下降
- 延迟和内存挑战：大规模系统持续产生海量日志（如Google系统每小时50GB），历史日志比对消耗大量资源
- 现有正则表达式方法维护困难且性能不佳，需要更简单有效的自动化方案

## 方法概述
NCChecker基于四条启发式规则设计，包含三个阶段。第一阶段进行日志抽象，将非结构化日志消息解析为结构化日志事件，去除噪声细节保留关键信息。第二阶段构建失败原因查找表，表的行为不同日志事件，列为不同失败原因（环境问题、缺陷相关、测试脚本问题、第三方库问题），单元格包含NCChecker通过启发式规则估算的关联分数。

在失败原因预测阶段，对新报告的失败测试用例，NCChecker将测试日志解析为日志事件序列，从查找表中查询每个日志事件对应各失败原因的分数，对特定失败原因的所有日志事件分数求和，选择最大值对应的失败原因作为最终预测结果。

## 关键实验发现
- RQ1（有效性）：NCChecker在超过10K测试日志的工业数据集上显著优于多个最先进方法
- RQ2（不平衡处理）：NCChecker在高度不平衡的数据集上表现良好，能成功识别少数类别的失败原因
- RQ3（效率）：NCChecker高效且内存消耗低，适合大规模日志分析场景
- 数据集包含7,159个失败日志和3,286个通过日志，四类失败原因分布极不均衡

## 写作特征备注
- 标题结构：对比式标题（Easy over Hard）+ 任务描述副标题
- 摘要是否有数字：是（10K测试日志，30-40%时间消耗）
- 是否有RQ：否（通过实验问题组织但未明确编号为RQ）
- 是否有Motivating Example：否（通过Key Insights引导方法设计）
- 贡献点数量：4

## 结论
NCChecker以极其简单的启发式规则实现了优于复杂方法的测试失败原因预测性能，同时具备高效率、低内存和抗数据不平衡的优势，适合作为该领域未来研究的标准基线。
