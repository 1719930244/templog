# Streamlining Java Programming: Uncovering Well-Formed Idioms with IdioMine
# 简化Java编程：使用IdioMine发掘规范的代码惯用法

**来源**: ICSE 2024 | **作者**: Yanming Yang 等

## 摘要
代码惯用法（code idiom）是跨多个软件项目常用的模式、技术或实践，能提高代码质量、性能和可维护性，促进程序标准化和复用。然而，现有研究在识别代码惯用法方面存在三个主要局限：无法识别跨非连续代码行的惯用法、难以识别具有复杂数据流和代码结构的惯用法、只能提取数据集特定的惯用法。本文提出IdioMine，通过程序分析将Java函数转换为简洁的PDG，开发数据驱动控制链（DCC）提取子惯用法，利用GraphCodeBERT和密度聚类识别频繁子惯用法，最后借助ChatGPT合成和识别真实惯用法。IdioMine在Idiom Set Precision上比Haggis和ChatGPT分别提升22.8%和35.5%，在Idiom Coverage上分别提升9.7%和22.9%。

## 引言核心
- 代码惯用法能减少歧义、优化性能、增强可读性，开发者广泛认可编写惯用代码的重要性
- 现有方法（如Haggis）依赖手动标注，无法识别非连续代码行组成的惯用法
- 现有方法仅捕获单向信息流，无法处理复杂数据流和控制流的惯用法
- 现有方法仅基于数据集中的频率分布识别惯用法，遗漏在该数据集中出现少但广泛适用的通用惯用法
- 需要一种能同时提取数据集特定和通用惯用法的无监督方法

## 方法概述
IdioMine包含三个阶段。第一阶段惯用法表示构建：对Java函数进行程序分析构建PDG（程序依赖图），综合集成数据流和控制流信息；开发DCC（数据驱动控制链）结构，从PDG中提取具有连续语义含义的代码行作为子惯用法。第二阶段频繁子惯用法挖掘：使用GraphCodeBERT生成子惯用法的代码嵌入，采用密度聚类技术识别频繁出现的子惯用法。

第三阶段语义惯用法识别：基于预定义规则识别频繁子惯用法中的相关子惯用法，利用ChatGPT将相关子惯用法合成为潜在代码惯用法，并从候选池中准确识别真实惯用法。该方法的创新在于能处理非连续代码行、复杂数据控制流，并能发现通用惯用法而非仅限于数据集特定的惯用法。

## 关键实验发现
- RQ1（有效性）：IdioMine在ISP上比Haggis和ChatGPT分别提升22.8%和35.5%，在IC上分别提升9.7%和22.9%，提取的惯用法数量近乎基线的两倍
- RQ2（用户研究）：IdioMine提取的惯用法在代码完整性和语义清晰度上分别平均提升0.22和0.19

## 写作特征备注
- 标题结构：描述性标题（Streamlining Java Programming: Uncovering Well-Formed Idioms with IdioMine）
- 摘要是否有数字：是（22.8%、35.5%、9.7%、22.9%）
- 是否有RQ：是
- 是否有Motivating Example：是（三个Listing示例展示现有方法的局限性）
- 贡献点数量：4

## 结论
IdioMine通过PDG分析、DCC结构和ChatGPT辅助识别，克服了现有代码惯用法挖掘方法的三大局限，能够自动提取规范且语义清晰的通用和特定惯用法，在多个评估指标上显著优于基线方法。
