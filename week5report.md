# TraceGen Week5 Report（组会进度汇报）

> 截止日期：2026-02-10  
> 汇报口径：只写“我做了什么 / 解决了什么 / 跑了多大规模 / 效果如何”，屏蔽技术实现细节与方案设计讨论。

## 1) 周度进度总览（按周）

| Week（日期） | 本周目标/重点 | 我做了什么（面向结果） | 跑数规模 & 结果（可量化） | 解决的问题 / 产出 |
|---|---|---|---|---|
| Week1（01/05–01/09） | 项目跑通 & 产物落盘 | 搭建运行环境与基础工程；完成早期小规模试跑，确认数据能从输入→产物输出 | 形成最早一批提取产物与运行日志（可复现试跑） | 解决“流程跑不通/产物不落盘”的启动问题 |
| Week2（01/12–01/16） | 扩展到合成阶段 | 在提取基础上接入合成，开始生成 synthetic 样本雏形，并对输出格式做对齐整理 | 多次试跑产出合成侧结果（开始有可检查的 synthetic patch/元信息） | 暴露并记录“补丁不稳定/可用样本少”等早期质量问题，为后续优化明确方向 |
| Week3（01/19–01/23） | 工程化与可观测性 | 整理运行结构与统计口径，让每次运行能快速看“做了多少/成功多少/失败原因是什么” | 每次 run 形成阶段化目录与 summary/report 便于对比 | 解决“跑了但难以比较/难以定位瓶颈”的可观测性问题 |
| Week4（01/26–01/30） | 大规模实验准备 | 构建/整理 Django 全量实验所需的数据资产（图/提取缓存/向量库/仓库镜像等），并编排全量跑数脚本与配置 | Django 图与提取缓存：各 **114** 份；向量库覆盖 **114 commits**；向量池 **63,651×1024** | 解决“大规模跑数前置资产不齐/重复构建耗时大”的问题，具备全量跑数条件 |
| **Week5（02/02–02/06）** | **全链路跑通 + 大规模跑数** | **把流程从“能跑”推进到“能批量验证&评测”；集中处理稳定性与耗时问题；形成可汇报的阶段性结果** | **全量 seeds：Django 114；候选补丁质量检查：479 条；累计 Stage3 验证产物 1000+ 条；Stage4 seed 对比跑通（seed resolved 6/8；synthetic resolved 0/3）** | **解决：验证耗时过大（显著缩小必跑测试集合）、评测口径不稳（seed 对比不再大量跳过）、关键失败模式可归因（NO_FAIL / patch apply fail）** |
| Week6（02/09–02/10，进行中） | 提升有效样本产出 | 离线评测“仅向量检索”可用性并把 seeds 分桶；基于代表性小集合回归，提升合成可验证率并治理数据噪声 | Stage2 离线检索：**92/114** seeds 可检索到候选；3 个代表性 seeds 回归：均获得至少 1 个可验证样本 | 解决“哪些 seeds 先跑更划算/失败原因是什么”的选择问题；降低“无意义文本噪声”导致的数据质量风险 |

## 2) TraceGen 流程说明（非技术细节版）

整体目标：基于真实 seed bug，自动生成“可验证的 synthetic bug”，并可对其进行求解评测，最终沉淀为可复现实验数据与报告。

1. **输入（Seed Bugs）**：从 SWE-bench 类数据读取 seed 的代码版本、修复补丁与测试信息。  
2. **缺陷信息提取（Extraction）**：从 seed 中抽取可用于指导合成的结构化信息（用于后续“生成同类 bug”）。  
3. **合成新缺陷（Synthesis）**：在仓库中选择候选位置注入缺陷，生成 synthetic patch 与对应测试计划。  
4. **容器验证（Validation）**：在容器内验证 synthetic patch 是否真的引入缺陷（至少 1 个测试从通过变失败）且不把所有测试都搞挂（需要保留通过测试）。产出 valid/invalid/error/timeout。  
5. **求解评测（Solving，可选）**：对通过验证的 synthetic bug 生成修复补丁并跑测试评测；同时可对对应 seed 做对比评测，形成可对齐的指标与总结。

## 3) 跑数规模与阶段性结果（截至 2026-02-10）

| 项目 | 规模/结果 | 说明（面向组会） |
|---|---:|---|
| 目标仓库规模（Django） | **114 seeds / 114 commits** | 已具备全量跑数资产与配置 |
| 核心数据资产 | 图缓存 **114**；提取缓存 **114**；向量池 **63,651×1024** | 支撑大规模候选检索与快速复跑 |
| Stage2 离线检索可用性 | **92/114 可用（≈80.7%）** | 先跑“可检索成功”的子集更高效；失败 seeds 已按原因分桶便于逐类修复 |
| Stage3 验证累计产物（全历史） | **1022** 条：valid **110** / invalid **361** / error **523** / timeout **28** | 已形成“失败模式占比”画像；error/invalid 的主因已定位到少数关键类问题 |
| Stage4（seed 对比已跑通） | seed resolved **6/8**；synthetic resolved **0/3** | seed 侧评测链路稳定；synthetic solved 仍是下一阶段提升重点 |

## 4) 关键时间点改进（只写动作与效果）

| 时间 | 我做了什么 | 直接效果（可观察） |
|---|---|---|
| 01/26–01/30 | 补齐大规模实验前置资产（图/提取/向量/仓库等） | 从“小规模能跑”进入“全量可跑/可复跑” |
| 02/02 | 跑通容器内验证并开始批量验证 | 开始稳定产出 valid/invalid/error 的结构化结果与日志 |
| 02/03 | 把验证流程做成“更快、口径更一致、失败可归因” | 验证开销显著下降；能对失败进行分类统计与回溯 |
| 02/04–02/05 | 跑通求解评测与 seed 对比口径，并修正统计口径/输出指标 | seed 侧不再大量跳过；summary 指标可用于对比实验 |
| 02/09 | 做 Stage2 离线可用性评测并产出 seeds 子集 | 明确“先跑谁更值/哪些类问题优先修”，降低无效跑数 |
| 02/10 | 小规模回归提升合成可验证率，并加强数据质量约束 | 代表性 seeds 回归稳定拿到可验证样本；减少文本噪声污染 |

## 5) 当前主要问题 & 下周计划（面向组会）

**主要问题（按影响排序）**
- synthetic 端“可验证样本比例”仍不足（大量注入后测试不失败，导致 invalid）。
- patch 可用性仍会带来较多 error（影响有效样本产出与跑数效率）。
- Stage4 对 synthetic 的 solved 率偏低（需要更多 valid 样本与更有效的求解评测闭环）。

**Week6（02/09–02/13）计划**
- 以“提升 valid synthetic 比例”为第一目标：在固定 seeds 子集上做迭代对比，逐轮观察 valid 率提升幅度。
- 针对 error/invalid 的头部原因做专项清理（优先把无效跑数成本降下来）。
- 主流程 pipeline 结束后，对出现 **429（insufficient_quota）** 的 id 进行补跑，避免因配额波动导致样本缺失。
- 基于已通过验证的 synthetic 子集，继续扩大 Stage4 synthetic 评测样本量，形成可汇报的对比表（synthetic vs seed）。
